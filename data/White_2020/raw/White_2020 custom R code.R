read_csv("data/White_2020/raw/White_2020_raw_data.csv") %>%
  mutate(Fire_not_rel = ifelse(Fire_not_rel == 1,"fire_not_relevant",""),
         Fire_K = ifelse(Fire_K == 1, "fire_killed",""),
         Fire_NK_1 = ifelse(Fire_NK == 1 & Resprout == 0, "not_fire_killed_does_not_resprout",""),
         Fire_NK_2 = ifelse(Fire_NK == 1 & Resprout == 1, "resprouts",""),
         fire_response = paste(Fire_not_rel,Fire_K,Fire_NK_1,Fire_NK_2),
         fire_response = gsub("NA","",fire_response),
         fire_response = str_trim(fire_response,side="both"),
         fire_response = gsub("   "," ",fire_response),
         fire_response = gsub("  "," ",fire_response),
         fire_response = gsub("  "," ",fire_response),
         fire_response = gsub(" "," ",fire_response)) %>%
  mutate(disp_barochory = ifelse(Disp_Pass == 1,"barochory",""),
         disp_hydrochory = ifelse(Disp_Water == 1,"hydrochory",""),
         disp_anemochory = ifelse(Disp_Wind == 1,"anemochory",""),
         disp_endozoochory_mammal = ifelse(`Disp_Mam(int)` == 1,"endozoochory_mammal",""),
         disp_exozoochory_mammal = ifelse(`Disp_Mam(ext)` == 1,"exozoochory_mammal",""),
         disp_endozoochory_bird = ifelse(`Disp_Bird(int)` == 1,"endozoochory_bird",""),
         disp_exozoochory_bird = ifelse(`Disp_Bird(ext)` == 1,"exozoochory_bird",""),
         disp_invertebrate = ifelse(`Disp_Invert(ext)` == 1,"invertebrate_insect",""),
         disp_rare = ifelse(Disp_Vege == 1,"dispersal_rare",""),
         dispersal_syndrome = paste(disp_barochory,disp_hydrochory,disp_anemochory,disp_endozoochory_mammal,disp_exozoochory_mammal,
                                    disp_endozoochory_bird,disp_exozoochory_bird,disp_invertebrate,disp_rare),
         dispersal_syndrome = gsub("NA","",dispersal_syndrome),
         dispersal_syndrome = str_trim(dispersal_syndrome,side="both"),
         dispersal_syndrome = gsub("   "," ",dispersal_syndrome),
         dispersal_syndrome = gsub("  "," ",dispersal_syndrome),
         dispersal_syndrome = gsub("  "," ",dispersal_syndrome),
         dispersal_syndrome = gsub(" "," ",dispersal_syndrome)) %>%
  mutate(flowering_season = paste0(Flower_Jan,Flower_Feb,Flower_Mar,Flower_Apr,Flower_May,Flower_Jun,Flower_Jul,
                                   Flower_Aug,Flower_Sep,Flower_Oct,Flower_Nov,Flower_Dec),
         flowering_season = gsub("NANANANANANANANANANANANA","",flowering_season)) %>%
  mutate(LL_CL1 = ifelse(LL_CL == 1 & Is_Liana == 1,"climber_liana",""),
         LL_CL2 = ifelse(LL_CL == 1 & Is_Liana == 0 & MM_S ==1,"climber_shrub",""),
         LL_CL3 = ifelse(LL_CL == 1 & Is_Liana == 0 & MM_F ==1,"climber_herb",""),
         LL_CL4 = ifelse(LL_CL == 1 & Is_Liana == 0 & MM_F ==0 & MM_S == 0,"climber",""),
         LL_EP_1 = ifelse(LL_EP == 1 & MM_F == 1,"epiphyte_herb",""),
         LL_EP_2 = ifelse(LL_EP == 1 & MM_F == 0,"epiphyte",""),
         LL_H = ifelse(LL_H == 1,"herb",""),
         LL_LG = ifelse(LL_LG == 1,"graminoid_not_tussock_tall",""),
         LL_LH = ifelse(LL_LH == 1,"herb_large",""),
         LL_LT = ifelse(LL_LT == 1,"tree",""),
         LL_LTG = ifelse(LL_LTG == 1,"graminoid_tussock_tall",""),
         LL_MG = ifelse(LL_MG == 1,"graminoid_not_tussock",""),
         LL_MT = ifelse(LL_MT == 1,"treelet",""),
         LL_MTG = ifelse(LL_MTG == 1,"graminoid_tussock",""),
         LL_PA = ifelse(LL_PA == 1,"palm",""),
         LL_PH = ifelse(LL_PH == 1,"prostrate_herb",""),
         LL_PS = ifelse(LL_PS == 1,"prostrate_shrub",""),
         LL_RGF = ifelse(LL_RGF == 1,"fern",""),
         LL_S = ifelse(LL_S == 1,"shrub",""),
         LL_SC = ifelse(LL_SC == 1,"climber_scrambler",""),
         LL_SG = ifelse(LL_SG == 1,"graminoid_not_tussock",""),
         LL_SH = ifelse(LL_SH == 1,"short_basal",""),
         LL_SS = ifelse(LL_SS == 1,"shrub",""),
         LL_STG = ifelse(LL_STG == 1,"graminoid_tussock",""),
         LL_T = ifelse(LL_T == 1,"tree",""),
         LL_TG = ifelse(LL_TG == 1,"graminoid_not_tussock",""),
         LL_TGF = ifelse(LL_TGF == 1,"fern",""),
         LL_TRF = ifelse(LL_TRF == 1,"fern_tree",""),
         LL_TTG = ifelse(LL_TTG == 1,"graminoid_tussock",""),
         plant_growth_form = paste(LL_CL1,LL_CL2,LL_CL3,LL_CL4,LL_EP_1,LL_EP_2,LL_H,LL_LG,LL_LH,LL_LT,LL_LTG,LL_MG,LL_MT,LL_MTG,
                                   LL_PA,LL_PH,LL_PS,LL_RGF,LL_S,LL_SC,LL_SG,LL_SH,LL_SS,LL_STG,LL_T,LL_TG,LL_TGF,LL_TRF,LL_TTG),
         plant_growth_form = gsub("NA","",plant_growth_form),
         plant_growth_form = str_trim(plant_growth_form,side="both"),
         plant_growth_form = gsub("      "," ",plant_growth_form),
         plant_growth_form = gsub("     "," ",plant_growth_form),
         plant_growth_form = gsub("    "," ",plant_growth_form),
         plant_growth_form = gsub("   "," ",plant_growth_form),
         plant_growth_form = gsub("  "," ",plant_growth_form),
         plant_growth_form = gsub(" "," ",plant_growth_form),
         plant_growth_form = gsub(" "," ",plant_growth_form)) %>%
  mutate(PhotoNotDefined = ifelse(PhotoNotDefined == 1,"unknown",""),
         Photo_C3 = ifelse(Photo_C3 == 1,"C3",""),
         Photo_C4 = ifelse(Photo_C4 == 1,"C4",""),
         Photo_CAM = ifelse(Photo_CAM == 1,"cam",""),
         photosynthetic_pathway = paste(PhotoNotDefined,Photo_C3,Photo_C4,Photo_CAM),
         photosynthetic_pathway = gsub("NA","",photosynthetic_pathway),
         photosynthetic_pathway = str_trim(photosynthetic_pathway,side="both"),
         photosynthetic_pathway = gsub("  "," ",photosynthetic_pathway),
         photosynthetic_pathway = gsub(" "," ",photosynthetic_pathway),
         photosynthetic_pathway = gsub(" "," ",photosynthetic_pathway)) %>%
  mutate(SalinityNotDefined = ifelse(SalinityNotDefined == 1,"salinity_tolerance_undefined",""),
         SaltSprayTolerant = ifelse(SaltSprayTolerant == 1,"salt_spray_tolerant",""),
         Glycophyte = ifelse(Glycophyte == 1,"glycophyte",""),
         Halophyte = ifelse(Halophyte == 1,"halophyte",""),
         SaltModerateTolerant = ifelse(SaltModerateTolerant == 1,"halophyte_moderate",""),
         salt_tolerance = paste(SalinityNotDefined,SaltSprayTolerant,Glycophyte,Halophyte,SaltModerateTolerant),
         salt_tolerance = gsub("NA","",salt_tolerance),
         salt_tolerance = str_trim(salt_tolerance,side="both"),
         salt_tolerance = gsub("  "," ",salt_tolerance),
         salt_tolerance = gsub("  "," ",salt_tolerance),
         salt_tolerance = gsub("  "," ",salt_tolerance),
         salt_tolerance = gsub(" "," ",salt_tolerance)) %>%
  mutate(Poll_rare = ifelse(Poll_rare == 1,"pollination_rare",""),
         Poll_Abiotic = ifelse(Poll_Abiotic == 1,"abiotic",""),
         Poll_invert = ifelse(Poll_invert == 1,"insect",""),
         Poll_Vert = ifelse(Poll_Vert == 1,"vertebrate",""),
         pollination_syndrome = paste(Poll_rare,Poll_Abiotic,Poll_invert,Poll_Vert),
         pollination_syndrome = gsub("NA","",pollination_syndrome),
         pollination_syndrome = str_trim(pollination_syndrome,side="both"),
         pollination_syndrome = gsub("  "," ",pollination_syndrome),
         pollination_syndrome = gsub("  "," ",pollination_syndrome),
         pollination_syndrome = gsub("  "," ",pollination_syndrome),
         pollination_syndrome = gsub(" "," ",pollination_syndrome)) %>%
  mutate(propagule_longevity = paste0(`Seed<2`,`Seed>2`)) %>%
  mutate(calcicole_status = paste0(Calcicole,Calcifuge)) %>%
  mutate(lifespan = paste0(`Long<1`,`Long1-10`,`Long10-50`,`Long50-500`,`Long>500`),
         lifespan = gsub("NA","0",lifespan),
         lifespan = gsub("00001",">500",lifespan),
         lifespan = gsub("10001",">500",lifespan),
         lifespan = gsub("10000","<1",lifespan),
         lifespan = gsub("01000","<10",lifespan),
         lifespan = gsub("01100","<50",lifespan),
         lifespan = gsub("00100","<50",lifespan),
         lifespan = gsub("00010","50-500",lifespan),
         lifespan = gsub("00110","50-500",lifespan),
         lifespan = gsub("00000","NA",lifespan),
         lifespan = gsub("00101",">500",lifespan)) %>%
  mutate(life_form = paste0(`Geophyte`)) %>%
  mutate(serotiny = ifelse(SeedS_ser == 1,"serotinous","not_serotinous"),
         seed_release = paste0(SeedS_ser,SeedS_mat,SeedS_grad),
         seed_release = gsub("NA","0",seed_release),
         seed_release = gsub("100","serotinous",seed_release),
         seed_release = gsub("010","mature_en_mass",seed_release),
         seed_release = gsub("001","gradual_release",seed_release),
         seed_release = gsub("000",NA,seed_release),
         seed_release = gsub("011","mature_en_mass gradual_release",seed_release)) %>%
  mutate(regen_strategy = ifelse(Resprout == 1 & Fire_NK == 1,"resprouts",NA),
         regen_strategy = ifelse(Resprout == 1 & Fire_NK == 0,"resprouts_non_fire_disturbance",regen_strategy)) %>%
  mutate(reproductive_maturity = paste0(`Mat<1`,`Mat1-5`,`Mat5-20`,`Mat>20`),
         reproductive_maturity = gsub("NA","0",reproductive_maturity),
         reproductive_maturity = gsub("0000",NA,reproductive_maturity),
         reproductive_maturity = gsub("1000","<1",reproductive_maturity),
         reproductive_maturity = gsub("0100","1-5",reproductive_maturity),
         reproductive_maturity = gsub("0010","5-20",reproductive_maturity),
         reproductive_maturity = gsub("0001",">20",reproductive_maturity),
         reproductive_maturity = gsub("1100","<1",reproductive_maturity)) %>%
  mutate(snow_tolerance = paste0(`Snow_K`,`Snow_intol`,`Snow_day`,`Snow_week`,`Snow_month`),
         snow_tolerance = gsub("NA","0",snow_tolerance),
         snow_tolerance = gsub("00000",NA,snow_tolerance),
         snow_tolerance = gsub("10000","not_applicable",snow_tolerance),
         snow_tolerance = gsub("01000","intolerant",snow_tolerance),
         snow_tolerance = gsub("00100","days",snow_tolerance),
         snow_tolerance = gsub("00010","weeks",snow_tolerance),
         snow_tolerance = gsub("00001","months",snow_tolerance),
         snow_tolerance = gsub("00111","days weeks months",snow_tolerance),
         snow_tolerance = gsub("00110","days weeks",snow_tolerance),
         snow_tolerance = gsub("10110","not_applicable days weeks",snow_tolerance),
         snow_tolerance = gsub("10111","not_applicable days weeks months",snow_tolerance),
         snow_tolerance = gsub("11000","not_applicable intolerant",snow_tolerance),
         water_logging_tolerance = paste0(`Aquat`,`WL K`,`WL_<1`,`WL_1-6`,`WL_>6`),
         water_logging_tolerance = gsub("NA","0",water_logging_tolerance),
         water_logging_tolerance = gsub("00000",NA,water_logging_tolerance),
         water_logging_tolerance = gsub("10000","aquatic",water_logging_tolerance),
         water_logging_tolerance = gsub("01000","not_applicable",water_logging_tolerance),
         water_logging_tolerance = gsub("00100","<1_month",water_logging_tolerance),
         water_logging_tolerance = gsub("00010","1-6_months",water_logging_tolerance),
         water_logging_tolerance = gsub("00001",">6_months",water_logging_tolerance),
         water_logging_tolerance = gsub("00111","<1_month 1-6_months >6_months",water_logging_tolerance),
         water_logging_tolerance = gsub("00110","<1_month 1-6_months",water_logging_tolerance),
         water_logging_tolerance = gsub("01110","not_applicable <1_month 1-6_months",water_logging_tolerance),
         water_logging_tolerance = gsub("10111","aquatic <1_month 1-6_months >6_months",water_logging_tolerance),
         water_logging_tolerance = gsub("01001","not_applicable >6_months",water_logging_tolerance),
         inundation_tolerance = paste0(`Inun_perm`,`Inun_not_confronted`,`Inun_<1`,`Inun_1-6`,`Inun_>6_ni`),
         inundation_tolerance = gsub("NA","0",inundation_tolerance),
         inundation_tolerance = gsub("00000",NA,inundation_tolerance),
         inundation_tolerance = gsub("10000","aquatic",inundation_tolerance),
         inundation_tolerance = gsub("01000","not_applicable",inundation_tolerance),
         inundation_tolerance = gsub("00100","<1_month",inundation_tolerance),
         inundation_tolerance = gsub("00010","1-6_months",inundation_tolerance),
         inundation_tolerance = gsub("00001",">6_months",inundation_tolerance),
         inundation_tolerance = gsub("00110","<1_month 1-6_months",inundation_tolerance),
         inundation_tolerance = gsub("00111","<1_month 1-6_months >6_months",inundation_tolerance),
         inundation_tolerance = gsub("10111","not_applicable <1_month 1-6_months >6_months",inundation_tolerance)) %>%
  mutate(bark_morphology = paste0(`Bark_Box`,`Bark_Gum`,`Bark_Half`,`Bark_Ironbark`,`Bark_Peppermint`,`Bark_Stringy`, `Bark_Ribbon`),
         bark_morphology = gsub("0000000",NA,bark_morphology),
         bark_morphology = gsub("1000000","eucalypt_box",bark_morphology),
         bark_morphology = gsub("0100000","eucalypt_gum",bark_morphology),
         bark_morphology = gsub("0010000","eucalypt_stocking",bark_morphology),
         bark_morphology = gsub("0001000","eucalypt_ironbark",bark_morphology),
         bark_morphology = gsub("0000100","eucalypt_peppermint",bark_morphology),
         bark_morphology = gsub("0000010","eucalypt_stringybark",bark_morphology),
         bark_morphology = gsub("0000001","eucalypt_ribbonbark",bark_morphology),
         bark_morphology = gsub("0100001","eucalypt_gum eucalypt_ribbonbark",bark_morphology),
         bark_morphology = gsub("0010001","eucalypt_stocking eucalypt_ribbonbark",bark_morphology)) %>%
  write_csv("data/White_2020/data.csv") -> test