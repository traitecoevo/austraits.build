<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AusTraits repo file structure • austraits.build</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="AusTraits repo file structure">
<meta property="og:description" content="austraits.build">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">austraits.build</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
    home
  </a>
</li>
<li>
  <a href="../articles/austraits.build.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Details
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/austraits_overview.html">Overview of `AusTraits` workflow</a>
    </li>
    <li>
      <a href="../articles/austraits_database_structure.html">Structure of `AusTraits` data compilation</a>
    </li>
    <li>
      <a href="../articles/Trait_definitions.html">Definitions for traits in `AusTraits`</a>
    </li>
    <li>
      <a href="../articles/austraits_file_structure.html">File structure of `AusTraits` repo</a>
    </li>
    <li>
      <a href="../articles/contributing_data.html">Contributing data to `AusTraits`</a>
    </li>
    <li>
      <a href="../articles/adding_data.html">Adding new datasets into `AusTraits`</a>
    </li>
    <li>
      <a href="../articles/Docker.html">Docker for reproducible compute environment</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-list"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/traitecoevo/austraits.build">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="austraits_file_structure_files/header-attrs-2.10/header-attrs.js"></script><script src="austraits_file_structure_files/kePrint-0.0.1/kePrint.js"></script><link href="austraits_file_structure_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>AusTraits repo file structure</h1>
            
            <h4 class="date">2021-10-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/traitecoevo/austraits.build/blob/master/vignettes/austraits_file_structure.Rmd"><code>vignettes/austraits_file_structure.Rmd</code></a></small>
      <div class="hidden name"><code>austraits_file_structure.Rmd</code></div>

    </div>

    
    
<div id="file-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#file-structure" class="anchor"></a>File structure</h2>
<p>The main directory for the <a href="https://github.com/traitecoevo/austraits.build/"><code>austraits.build</code></a> repository contains the following files and folders, with purpose as indicated.</p>
<div id="r-project-file" class="section level4">
<h4 class="hasAnchor">
<a href="#r-project-file" class="anchor"></a>R project file</h4>
<pre><code>├── austraits.build.Rproj     # Rstudio project</code></pre>
</div>
<div id="files-for-maintaining-a-repo-on-github" class="section level4">
<h4 class="hasAnchor">
<a href="#files-for-maintaining-a-repo-on-github" class="anchor"></a>Files for maintaining a repo on github</h4>
<pre><code>├── README.md         # landing page
├── .github           # folder containing github actions, issue templates, code of conduct
├── LICENCE
├── NEWS.md
├── _pkgdown.yml      # used to create packagedown website
├── docs              # contains website
├── Dockerfile        # creates an image of R environment used in build</code></pre>
</div>
<div id="files-used-for-creation-of-r-package-austraits-build" class="section level4">
<h4 class="hasAnchor">
<a href="#files-used-for-creation-of-r-package-austraits-build" class="anchor"></a>Files used for creation of R package austraits.build</h4>
<pre><code>├── NAMESPACE             # functions being exported
├── DESCRIPTION           # R package description
├── man                   # XXXX-not in file structure
├── R                     # folder with functions and scripts to build AusTraits
├── tests                 # defines tests applied to datasets
├── vignettes             # documentation of repo file structure, AusTraits database structure, definitions, data input processes</code></pre>
</div>
<div id="files-used-for-data-compilation" class="section level4">
<h4 class="hasAnchor">
<a href="#files-used-for-data-compilation" class="anchor"></a>Files used for data compilation</h4>
<pre><code>├── remake.yml            # instructions for build
├── config                # configuration and definition files
├── data                  # raw data files
├── export                # folder for output
└── scripts               # scripts for processing files before/after building austraits, including compiling reports</code></pre>
</div>
</div>
<div id="details-on-files-used-for-data-compilation" class="section level2">
<h2 class="hasAnchor">
<a href="#details-on-files-used-for-data-compilation" class="anchor"></a>Details on files used for data compilation:</h2>
</div>
<div id="configuration" class="section level2">
<h2 class="hasAnchor">
<a href="#configuration" class="anchor"></a>Configuration</h2>
<p>The folder <code>config</code> contains three files which govern the building of the dataset.</p>
<pre><code>config
├── definitions.yml
├── taxon_list.csv
└── unit_conversions.csv</code></pre>
<p>The file <code>definitions.yml</code> defines the structure of the database and all terms. There are three main sections to the <code>definitions.yml</code> file, the trait definitions used to compile AusTraits, allowable trait values, and definitions of all elements included in the tables that comprise AusTraits. The <a href="http://traitecoevo.github.io/austraits.build/articles/Trait_definitions.html">trait definitions</a> and <a href="http://traitecoevo.github.io/austraits.build/articles/austraits_database_structure.html">definitions of all elements in AusTraits (and value types)</a> are fully described in additional vignettes. A <code>.yml</code> file is a structured data file where information is presented in a hierarchical format (see <a href="#yaml">appendix for details</a>).</p>
<p>The file <code>taxon_list.csv</code> is our master list of known taxa. Each species is listed once, with links to species’ identifiers provided by the Australian Plant Name Index (APNI). The file <code>taxon_list.csv</code> is added to if a study includes taxa not previously represented in AusTraits. These can be names included in either the APC/APNI, compilations of taxonomic concepts (APC) or names (APNI) for plants that are either native to or naturalised in Australia, or taxa without recognised names.</p>
<table class="table table table-striped table-hover table-condensed table-responsive">
<thead><tr>
<th style="text-align:left;">
taxon_name
</th>
<th style="text-align:left;">
family
</th>
<th style="text-align:left;">
scientificNameAuthorship
</th>
<th style="text-align:left;">
source
</th>
<th style="text-align:left;">
taxonomicStatusClean
</th>
<th style="text-align:left;">
taxonIDClean
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Abelia
</td>
<td style="text-align:left;">
Caprifoliaceae
</td>
<td style="text-align:left;">
R.Br.
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2892114" class="uri">https://id.biodiversity.org.au/node/apni/2892114</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abelia x grandiflora
</td>
<td style="text-align:left;">
Caprifoliaceae
</td>
<td style="text-align:left;">
(Rovelli ex André) Rehder
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2914209" class="uri">https://id.biodiversity.org.au/node/apni/2914209</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abelmoschus
</td>
<td style="text-align:left;">
Malvaceae
</td>
<td style="text-align:left;">
Medik.
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2898872" class="uri">https://id.biodiversity.org.au/node/apni/2898872</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abelmoschus ficulneus
</td>
<td style="text-align:left;">
Malvaceae
</td>
<td style="text-align:left;">
(L.) Wight
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2897916" class="uri">https://id.biodiversity.org.au/node/apni/2897916</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abelmoschus manihot
</td>
<td style="text-align:left;">
Malvaceae
</td>
<td style="text-align:left;">
(L.) Medik.
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2901085" class="uri">https://id.biodiversity.org.au/node/apni/2901085</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abelmoschus moschatus
</td>
<td style="text-align:left;">
Malvaceae
</td>
<td style="text-align:left;">
Medik.
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2900572" class="uri">https://id.biodiversity.org.au/node/apni/2900572</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abildgaardia
</td>
<td style="text-align:left;">
Cyperaceae
</td>
<td style="text-align:left;">
Vahl
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2905759" class="uri">https://id.biodiversity.org.au/node/apni/2905759</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abildgaardia ovata
</td>
<td style="text-align:left;">
Cyperaceae
</td>
<td style="text-align:left;">
(Burm.f.) Kral
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2919627" class="uri">https://id.biodiversity.org.au/node/apni/2919627</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abildgaardia vaginata
</td>
<td style="text-align:left;">
Cyperaceae
</td>
<td style="text-align:left;">
R.Br.
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/2899106" class="uri">https://id.biodiversity.org.au/node/apni/2899106</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Abrodictyum
</td>
<td style="text-align:left;">
Hymenophyllaceae
</td>
<td style="text-align:left;">
C.Presl
</td>
<td style="text-align:left;">
APC
</td>
<td style="text-align:left;">
accepted
</td>
<td style="text-align:left;">
<a href="https://id.biodiversity.org.au/node/apni/7402562" class="uri">https://id.biodiversity.org.au/node/apni/7402562</a>
</td>
</tr>
</tbody>
</table>
<p>The file <code>unit_conversions.csv</code> defines the unit conversions that are used when converting contributed trait data to common units, e.g.</p>
<table class="table table table-striped table-hover table-condensed table-responsive">
<thead><tr>
<th style="text-align:left;">
unit_from
</th>
<th style="text-align:left;">
unit_to
</th>
<th style="text-align:left;">
function
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
mg/g
</td>
<td style="text-align:left;">
x*10
</td>
</tr>
<tr>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
g/g
</td>
<td style="text-align:left;">
x*0.01
</td>
</tr>
<tr>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
mg/mg
</td>
<td style="text-align:left;">
x*0.01
</td>
</tr>
<tr>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
mg/kg
</td>
<td style="text-align:left;">
x*10000
</td>
</tr>
<tr>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
n/n
</td>
<td style="text-align:left;">
x*0.01
</td>
</tr>
<tr>
<td style="text-align:left;">
%
</td>
<td style="text-align:left;">
dimensionless
</td>
<td style="text-align:left;">
x*.01
</td>
</tr>
<tr>
<td style="text-align:left;">
years
</td>
<td style="text-align:left;">
month
</td>
<td style="text-align:left;">
x*12
</td>
</tr>
<tr>
<td style="text-align:left;">
count/m2
</td>
<td style="text-align:left;">
count/mm2
</td>
<td style="text-align:left;">
x*1/1000000
</td>
</tr>
<tr>
<td style="text-align:left;">
cm
</td>
<td style="text-align:left;">
m
</td>
<td style="text-align:left;">
x*0.01
</td>
</tr>
<tr>
<td style="text-align:left;">
cm
</td>
<td style="text-align:left;">
mm
</td>
<td style="text-align:left;">
x*10
</td>
</tr>
</tbody>
</table>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>The folder <code>data</code> contains the raw data from individual studies included in AusTraits.</p>
<p>Records within the <code>data</code> folder are organised as coming from a particular study, defined by the <code>dataset_id</code>. Data from each study is organised into a separate folder, with two files:</p>
<ul>
<li>
<code>data.csv</code>: a table containing the actual trait data.</li>
<li>
<code>metadata.yml</code>: a file that contains study metadata (source, methods, sites, and context), maps trait names and units onto standard types, and lists any substitutions applied to the data in processing.</li>
</ul>
<p>The folder <code>data</code> thus contains a long list of folders, one for each study and each containing two files:</p>
<pre><code>data
├── Angevin_2010
│   ├── data.csv
│   └── metadata.yml
├── Barlow_1981
│   ├── data.csv
│   └── metadata.yml
├── Bean_1997
│   ├── data.csv
│   └── metadata.yml
├── ....
</code></pre>
<p>where <code>Angevin_2010</code>, <code>Barlow_1981</code>, &amp; <code>Bean_1997</code> are each a unique <code>dataset_id</code> in the final dataset.</p>
<div id="create_data" class="section level3">
<h3 class="hasAnchor">
<a href="#create_data" class="anchor"></a>Data.csv</h3>
<p>The file <code>data.csv</code> contains raw measurements and can be in either long or wide format.</p>
<p>Required columns include the taxon name, the trait name (column in long format, header in wide format), units (column in long format, part of header in wide format), site (if applicable), context (if applicable), date (if available), and trait values.</p>
<p>It is important that all trait measurements made on the same individual or that are the mean of a species’ measurements from the same site are kept linked.</p>
<ul>
<li><p>If the data are in wide format, each row should include measurements made on a single individual or a single species-by-site mean, with different trait values as consecutive columns.</p></li>
<li><p>If the data are in long format, an additional column is required to ensure multiple trait measurements made on the same individual or are the mean of a species’ measurements from the same site are linked: <code>observation_ID</code> (or other identifier) must be assigned to identify which rows of measurements (for different traits) are linked to a unique individual or site.</p></li>
</ul>
<p>We aim to keep the data file in rawest form possible (i.e. as few changes as possible) but it must be a single csv file. Additional custom R code may be required to make the file exactly compatible with the AusTraits format, but these changes should be executed as AusTraits is compiled and should be in the <code>metadata.yml</code> file under <code>config/custom_R_code</code> (see below). Any files used to create the submitted <code>data.csv</code> file (e.g. Excel …) should be archived in a sub-folder within the study folder named <code>raw</code>.</p>
</div>
<div id="metadata-yml" class="section level3">
<h3 class="hasAnchor">
<a href="#metadata-yml" class="anchor"></a>Metadata.yml</h3>
<p>The metadata is compiled in a <code>.yml</code> file, a structured data file where information is presented in a hierarchical format (see <a href="#yaml">Appendix for details</a>). There are 11 values at the top hierarchical level: source, people, dataset, sites, contexts, config, traits, substitutions, taxonomic_updates, exclude_observations, questions. These are each described below.</p>
<p>As a start, you may want to checkout some examples from <a href="https://github.com/traitecoevo/austraits.build/tree/master/data">existing studies in Austraits</a>, e.g. <a href="https://github.com/traitecoevo/austraits.build/blob/master/data/Angevin_2011/metadata.yml">Angevin_2010</a> or <a href="https://github.com/traitecoevo/austraits.build/blob/master/data/Wright_2009/metadata.yml">Wright_2009</a>.</p>
<div id="source" class="section level4">
<h4 class="hasAnchor">
<a href="#source" class="anchor"></a>Source</h4>
<p>This section provides citation details for the original source(s) for the data, whether it is a published journal article, book, website, or thesis. In general we aim to reference the primary source. References are written in structured yml format, under the category <code>source</code> and then sub-groupings <code>primary</code> and <code>secondary</code>. General guidelines for describing a source</p>
<ul>
<li>maximum of one primary source allowed.</li>
<li>elements are names as in <a href="https://en.wikipedia.org/wiki/BibTeX">bibtex format</a>.</li>
<li>keys should be named in the format <code>Surname_year</code> and should be identical to the name given to the dataset folder. A second instance of the identical Surname_year should have the key Surname_year_2.</li>
<li>one or more secondary source may be included if traits from a single dataset were presented in two different manuscripts. Multiple sources are also appropriate if an author has compiled data from a number of sources, that are not individually in AusTraits, for a published or unpublished compilation.</li>
<li>if your data are from an unpublished study, only include the elements that are applicable.</li>
<li>If someone has transcribed a published source, the primary source will be the published work and the person who has completed the transcription will be acknowledged as the <code>contributor</code> of the dataset.</li>
</ul>
<p>An example of a primary source that is a journal article is:</p>
<pre><code>source:
  primary:
    key: Falster_2005_1
    bibtype: Article
    author: Daniel S. Falster, Mark Westoby
    year: 2005
    title: Alternative height strategies among 45 dicot rain forest species from tropical Queensland, Australia
    journal: Journal of Ecology
    volume: 93
    pages: 521--535
    publisher: Wiley-Blackwell
    doi: 10.1111/j.0022-0477.2005.00992.x</code></pre>
<p>If a secondary source is included it may look like:</p>
<pre><code>  primary:
    key: Choat_2006
    bibtype: Article
    year: '2006'
    author: B. Choat and M. C. Ball and J. G. Luly and C. F. Donnelly and J. A. M.
      Holtum
    journal: Tree Physiology
    title: Seasonal patterns of leaf gas exchange and water relations in dry rain
      forest trees of contrasting leaf phenology
    volume: '26'
    number: '5'
    pages: 657--664
    doi: 10.1093/treephys/26.5.657
  secondary:
    key: Choat_2005
    bibtype: Article
    year: '2005'
    author: Brendan Choat and Marilyn C. Ball and Jon G. Luly and Joseph A. M. Holtum
    journal: Trees
    title: Hydraulic architecture of deciduous and evergreen dry rainforest tree species
      from north-eastern Australia
    volume: '19'
    number: '3'
    pages: 305--311
    doi: 10.1007/s00468-004-0392-1</code></pre>
</div>
<div id="people" class="section level4">
<h4 class="hasAnchor">
<a href="#people" class="anchor"></a>People</h4>
<p>This section provides a list of the key contributors to the study, their respective institutions and roles in the study. Roles are defined as follows:</p>
<table class="table table table-striped table-hover table-condensed table-responsive">
<thead><tr>
<th style="text-align:left;">
key
</th>
<th style="text-align:left;">
value
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
collector
</td>
<td style="text-align:left;">
The person (people) leading data collection (generally 1-2 people)
</td>
</tr>
<tr>
<td style="text-align:left;">
contributor
</td>
<td style="text-align:left;">
Person responsible for entering data into AusTraits
</td>
</tr>
<tr>
<td style="text-align:left;">
lab_leader
</td>
<td style="text-align:left;">
Leader of lab group at time of collection
</td>
</tr>
<tr>
<td style="text-align:left;">
assistant
</td>
<td style="text-align:left;">
Anyone else who assisted in collection of the data
</td>
</tr>
<tr>
<td style="text-align:left;">
contact
</td>
<td style="text-align:left;">
The person to contact with questions about the data set
</td>
</tr>
</tbody>
</table>
<p>An example is as follows:</p>
<pre><code>people:
- name: Daniel Falster
  institution: Macquarie University
  role: collector, contact, contributor
- name: Mark Westoby
  institution: Macquarie University
  role: lab_leader
</code></pre>
<p>Note that only the AusTraits custodians have the contributors e-mail addresses on file. This information will not be directly available to AusTraits users or new contributors via Github.</p>
</div>
<div id="dataset" class="section level4">
<h4 class="hasAnchor">
<a href="#dataset" class="anchor"></a>Dataset</h4>
<p>This section includes study details, including study description, sampling strategy, sampling time frame, and sample age class.</p>
<p>The following elements are included under the element <code>dataset</code>:</p>
<ul>
<li>
<strong>year_collected_start</strong>: The year data collection commenced.</li>
<li>
<strong>year_collected_end</strong>: The year data collection was completed.</li>
<li>
<strong>description</strong>: A 1-2 sentence description of the purpose of the study.</li>
<li>
<strong>collection_type</strong>: A field to indicate where the majority of plants on which traits were measured were collected - in the <code>field</code>, <code>lab</code>, <code>glasshouse</code>, <code>botanical collection</code>, or <code>literature</code>. The latter should only be used when the data were sourced from the literature and the collection type is unknown.</li>
<li>
<strong>sample_age_class</strong>: A field to indicate if the study was completed on <code>adult</code> or <code>juvenile</code> plants.</li>
<li>
<strong>sampling_strategy</strong>: A written description of how study sites were selected and how study individuals were selected. When available, this information is lifted verbatim from a published manuscript. For botanical collections, this field ideally indicates which records were ‘sampled’ to measure a specific trait.</li>
<li>
<strong>original_file</strong>: The name of the file initially submitted to AusTraits</li>
<li>
<strong>notes</strong>: Generic notes about the study and processing of data</li>
</ul>
<p>An example is as follows:</p>
<pre><code>  year_collected_start: 2004
  year_collected_end: 2004
  description: Trait values for species with faster versus slower height growth following disturbance for Myall Lakes species.
  collection_type: field
  sample_age_class: adult
  sampling_strategy: Fire is a recurrent disturbance in the park (interval – 0–30 years; Fox and Fox 1986). A mosaic of fire histories has facilitated previous use of space-for-time substitutions in studies of small mammal succession (Fox and McKay 1981). Here we employ the same methodology to reconstruct species height-growth trajectories (Enright and Goldblum 1999). Sites were identified at a range of times since fire with the use of NSW national parks GIS fire history records and personal observations of Karen Ross (Ross et al. 2002). Patches of vegetation 1, 2, 4, 8, 10, 12, 15, 27 and 28 years since fire were identified. Where possible several patches within a given age class were surveyed to determine species presence or absence. Nineteen species recorded in a majority of patches were selected for further study. This included eight resprouting species and 11 obligate seeders (full list in Appendix 1).
  original_file: Falster &amp; Westoby 2005 Oikos appendix.doc
  notes: none</code></pre>
</div>
<div id="config" class="section level4">
<h4 class="hasAnchor">
<a href="#config" class="anchor"></a>Config</h4>
<p>This section includes information on the format of the submitted data file.</p>
<p>Values are as follows:</p>
<ul>
<li>
<strong>data_is_long_format</strong>: Indicates if the data spreadsheet has a vertical (long) or horizontal (wide) configuration with <code>yes</code> or <code>no</code> terminology</li>
<li>
<strong>variable_match</strong>: Identifies which information is in each column in the file <code>data.csv</code>, excluding the actual trait data. One element within <code>variable_match</code> must be <code>taxon_name</code>. Datasets with <code>data_is_long_format</code> set to <code>yes</code> must also identify which column includes data on <code>value</code> and <code>trait_name</code>. Other allowed values include <code>date</code>, <code>site_name</code>, <code>observation_id</code>, <code>context_name</code> if these columns are present in the <code>data.csv</code> file or created with custom R code.</li>
<li>
<strong>custom_R_code</strong>: A field where additional R code can be included. This allows for custom manipulation of the data in the submitted spreadsheet into a different format for easy integration with AusTraits. <code>.na</code> indicates no custom R code was used.</li>
</ul>
<p>An example is</p>
<pre><code>config:
  data_is_long_format: yes
  variable_match:
    species_name: Taxon
    value: trait value
    trait_name: trait
  custom_R_code: ' 
    data %&gt;% 
    mutate(`trait value` = ifelse(trait == 'flowering time', 
      convert_month_range_vec_to_binary(`trait value`), `trait value`)
      )
    '</code></pre>
<p>A common use of the <code>custom_R_code</code> is to automate the conversion of a verbal description of flowering or fruiting periods into the supported trait values, as occurs in this example. It might also be used if values for a single trait are expressed across multiple columns and need to be merged. See <code>Catford_2014</code> as an example of this. The <a href="http://traitecoevo.github.io/austraits.build/articles/adding_data.html">adding data</a> vignette provides additional examples of code regularly implemented in <code>custom_R_code</code>, including functions specifically developed for AusTraits data manipulations.</p>
</div>
<div id="traits" class="section level4">
<h4 class="hasAnchor">
<a href="#traits" class="anchor"></a>Traits</h4>
<p>This section provides a translation table mapping traits and units from a contributed study onto corresponding variables in AusTraits. Also specified here are methods used to collect the data.</p>
<p>For each trait submitted to AusTraits, there is the following information:</p>
<ul>
<li>
<strong>var_in</strong>: Name of trait in the original data submitted</li>
<li>
<strong>unit_in</strong>: Units of trait in the original data submitted</li>
<li>
<strong>trait_name</strong>: Name of trait sampled. Allowable values specified in the table <code>definitions</code>.</li>
<li>
<strong>value_type</strong>: A categorical variable describing the type of trait value recorded.</li>
<li>
<strong>replicates</strong>: Number of replicate measurements that comprise the data points for the trait for each measurement. A numeric value (or range) is ideal and appropriate if the value type is a <code>mean</code>, <code>median</code>, <code>min</code> or <code>max</code>. For these value types, if replication is unknown the entry should be <code>unknown</code>. If the value type is <code>raw_value</code> the replicate value should be 1. If the value type is <code>expert_mean</code>, <code>expert_min</code>, or <code>expert_max</code> the replicate value should be <code>.na</code>.</li>
<li>
<strong>methods</strong>: A textual description of the methods used to collect the trait data. Whenever available, methods are taken near-verbatim from referenced source. Methods can include descriptions such as ‘measured on botanical collections’, ‘data from the literature’, or a detailed description of the field or lab methods used to collect the data.</li>
</ul>
<p>Values under <code>trait_name</code> must be allowable values, list in the <code>definitions</code> <a href="https://github.com/traitecoevo/austraits.build/blob/master/config/definitions.yml">file</a> or <a href="http://traitecoevo.github.io/austraits.build/articles/Trait_definitions.html">vignette</a>. Similarly, values under <code>value_type</code> must be allowable values, also listed in the definitions file.</p>
<p>An example is as follows:</p>
<pre><code>traits:
- var_in: LMA (mg mm-2)
  unit_in: mg/mm2
  trait_name: specific_leaf_area
  value_type: site_mean
  replicates: 3
  methods: LMA was calculated as the leaf dry mass (oven-dried for 48 hours at 65 °C) divided by leaf size. It was measured on the first five fully expanded leaves at the tip of each individual.
- var_in: leaf size (mm2)
  unit_in: mm2
  trait_name: leaf_area
  value_type: site_mean
  replicates: 3
  methods: Leaf size was calculated as the one-sided leaf area (flat bed scanner). It was measured on the first five fully expanded leaves at the tip of each individual.</code></pre>
</div>
<div id="substitutions" class="section level4">
<h4 class="hasAnchor">
<a href="#substitutions" class="anchor"></a>Substitutions</h4>
<p>This section provides a list of any “find and replace” substitutions needed to get the data into the right format.</p>
<p>Substitutions are required whenever the exact word(s) used to describe a categorical trait value in AusTraits is different from the vocabulary used by the author in the <code>data.csv</code> file. It is preferable to align vocabulary using <code>substitutions</code> rather than changing the <code>data.csv</code> file. The <a href="https://github.com/traitecoevo/austraits.build/blob/master/config/definitions.yml">trait definitions file</a> provides a list of supported values for each trait.</p>
<p>Each substitution is documented using the following elements:</p>
<ul>
<li>
<strong>trait_name</strong>: Trait where substitutions are required</li>
<li>
<strong>find</strong>: Contributor’s trait value that needs to be changed</li>
<li>
<strong>replace</strong>: AusTraits supported replacement value</li>
</ul>
<p>An example is as follows:</p>
<pre><code>substitutions:
- trait_name: life_history
  find: p
  replace: perennial
- trait_name: plant_growth_form
  find: s
  replace: shrub
- ...</code></pre>
</div>
<div id="taxonomic-updates" class="section level4">
<h4 class="hasAnchor">
<a href="#taxonomic-updates" class="anchor"></a>Taxonomic updates</h4>
<p>This section provides a table of taxonomic name changes needed to align original names in dataset with taxa in apc and apni.</p>
<p>Each substitution is documented using the following elements:</p>
<ul>
<li>
<strong>find</strong>: Name given to taxon in the original data supplied by the authors</li>
<li>
<strong>replace</strong>: Whenever possible, this field indicates the currently accepted scientific name of a taxon, per the Australian Plant Census (APC). Alternatively, <code>taxon_name</code> can indicate an alignment with a name included in the comprehensive Australian Plant Names Index (APNI) but not currently marked as accepted in APC; or a name that cannot be aligned to available lists of Australian plant names.</li>
<li>
<strong>reason</strong>: Records why the change was implemented, e.g. <code>typos</code>, <code>taxonomic synonyms</code>, and <code>standardising spellings</code>
</li>
</ul>
<p>Algorithms within AusTraits automatically align outdated taxonomy and taxonomic synonyms to their currently accepted scientific name, so such adjustments are not documented as substitutions.</p>
<p>An example is as follows:</p>
<pre><code>taxonomic_updates:
- find: Eucalyptus albens X crebra
  replace: Eucalyptus albens x Eucalyptus crebra
  reason: Change wording for hybrid species (Elizabeth Wenk, 2020-06-30)
- find: Eucalyptus albens x moluccana
  replace: Eucalyptus albens x  Eucalyptus moluccana
  reason: Change wording for hybrid species (Elizabeth Wenk, 2020-06-30)</code></pre>
</div>
<div id="questions" class="section level4">
<h4 class="hasAnchor">
<a href="#questions" class="anchor"></a>Questions</h4>
<p>This section provides a place to record any queries we have about the dataset (recorded as a named array), including notes on any additional traits that may have been collected in the study but have not been incorporated into austraits.</p>
<p>An example is as follows:</p>
<pre><code>questions:
  questions for author: Triglochin procera has very different seed masses in the main traits spreadsheet and the field seeds worksheet. Which is correct? There are a number of species with values in the field leaves worksheet that are absent in the main traits worksheet - we have included this data into Austraits; please advise if this was inappropriate.
  austraits: need to map aquatic_terrestrial onto an actual trait once one is created.</code></pre>
</div>
</div>
</div>
<div id="appendices" class="section level1">
<h1 class="hasAnchor">
<a href="#appendices" class="anchor"></a>Appendices</h1>
<div id="file-types" class="section level2">
<h2 class="hasAnchor">
<a href="#file-types" class="anchor"></a>File types</h2>
<div id="csv" class="section level3">
<h3 class="hasAnchor">
<a href="#csv" class="anchor"></a>CSV</h3>
<p>A comma-separated values (CSV) file is a delimited text file that uses a comma to separate values. Each line of the file is a data record. Each record consists of one or more fields, separated by commas. This is a comma format for storing tables of data in a simple text file. You can edit it an Excel or in a text editor. For more, see <a href="https://en.wikipedia.org/wiki/Comma-separated_values">here</a>.</p>
</div>
<div id="yaml" class="section level3">
<h3 class="hasAnchor">
<a href="#yaml" class="anchor"></a>YAML files</h3>
<p>The <code>yml</code> file extension (pronounced “YAML”) <a href="https://en.wikipedia.org/wiki/YAML">is a type structured data file</a>, that is both human and machine readable. You can edit it any text editor, or also in Rstudio. Generally, yml is used in situations where a table does not suit because of variable lengths and or nested structures. It has the advantage over a spreadsheet in that the nested “headers” can have variable numbers of categories. The data under each of the hierarchical headings are easily extracted by R.</p>
</div>
</div>
<div id="custom_R_code" class="section level2">
<h2 class="hasAnchor">
<a href="#custom_R_code" class="anchor"></a>Adding custom R code into metadata.yml</h2>
<p>Occasionally all the changes we want to make to dataset may not fit into the prescribed workflow used in AusTraits. For example, we assume each trait has a single unit. But there are a few datasets where data on different rows have different units. So we want to make to make some custom modifications to this particular dataset before the common pipeline of operations gets applied. To make this possible, the workflow allows for some custom R code to be run as a first step in the processing pipeline. That pipeline (in the function <a href="https://github.com/traitecoevo/austraits/blob/master/R/steps.R#L59"><code>read_data_study</code></a>) looks like:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span>
  <span class="fu">read_csv</span><span class="op">(</span><span class="va">filename_data_raw</span>, col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/custom_manipulation.html">custom_manipulation</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">[[</span><span class="st">"config"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"custom_R_code"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/parse_data.html">parse_data</a></span><span class="op">(</span><span class="va">dataset_id</span>, <span class="va">metadata</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/dots.html">...</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Note the second line.</p>
<div id="example-problem" class="section level3">
<h3 class="hasAnchor">
<a href="#example-problem" class="anchor"></a>Example problem</h3>
<p>As an example, for <code>Blackman_2010</code> we want to combine two columns to create an appropriate site variable. Here is the code that was included in <a href="https://github.com/traitecoevo/austraits.build/blob/master/data/Blackman_2010/metadata.yml">data/Blackman_2010/metadata.yml</a> under <code>custom_R_code</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>
  site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">site</span> <span class="op">==</span> <span class="st">"Mt Field"</span> <span class="op">&amp;</span> <span class="va">habitat</span> <span class="op">==</span> <span class="st">"Montane rainforest"</span>, <span class="st">"Mt Field_wet"</span>, <span class="va">site</span><span class="op">)</span>,
  site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">site</span> <span class="op">==</span> <span class="st">"Mt Field"</span> <span class="op">&amp;</span> <span class="va">habitat</span> <span class="op">==</span> <span class="st">"Dry sclerophyll"</span>, <span class="st">"Mt Field_dry"</span>, <span class="va">site</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>This is the finished solution, but to get there we did as follows.</p>
<p>Generally, this code should</p>
<ul>
<li>assume a single object called <code>data</code>, and apply whatever fixes are needed</li>
<li>use <a href="https://dplyr.tidyverse.org">dplyr</a> functions like <code>mutate</code>, <code>rename</code>, etc</li>
<li>use pipes to weave together a single statement, possible. (Otherwise you’ll need a semi colons <code>;</code> at the end of each statement).</li>
<li>be fully self contained (we’re not going to use any of the other remake machinery here)</li>
</ul>
<p>First, load an object called <code>data</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/viking/r-yaml/">yaml</a></span><span class="op">)</span>

<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"Blackman_2010"</span>, <span class="st">"data.csv"</span><span class="op">)</span>, col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span>.default <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span><span class="op">)</span>
<span class="va">data</span></code></pre></div>
<p>Second, write your code to manipulate data, like the example above/</p>
<p>Third, once you have some working code, you then want to add it into your yml file under a group <code>config</code> -&gt; <code>custom_R_code</code>.</p>
<p>Finally, check it works. Let’s assume you added it in. The function <code>metadata_check_custom_R_code</code> loads the data and applies the custom R code:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metadata_check_custom_R_code.html">metadata_check_custom_R_code</a></span><span class="op">(</span><span class="st">"Blackman_2010"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Daniel Falster, Rachael Gallagher, Elizabeth Wenk, Ian Wright, Sam Andrew, Caitlin Baxter, ARDC, ARC.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
