---
title: Overview of AusTraits workflow
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Overview of AusTraits}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options:
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  results = "asis",
  echo = FALSE,
  message = FALSE,
  warning = FALSE
)

library(austraits.build)
library(dplyr)
library(readr)

root.dir <- rprojroot::find_root("remake.yml")
knitr::opts_knit$set(root.dir = root.dir)

my_kable_styling <- my_kable_styling_html
```

AusTraits is an open-source, harmonised database of Australian plant trait data. This vignette provides an overview of our workflow, to demonstrate our commitment to creating a reliable, reproducible resource for anyone interested in plant traits. 

## AusTraits workflow 

### Data sources

The data in AusTraits are derived from nearly 300 distinct sources, each contributed by an individual researcher, government entity (e.g. herbaria), or NGO. Each reflects the research agenda of the individual who contributed the data - the species selected, traits measured, manipulative treatments performed, and locations sampled encompass the diversity of research interests present in Australia across the past many decades. The AusTraits data curators have simply sought out researcher upon researcher to share their data, reaching out to as many people as time permitted, but not explicitly soliciting datasets with specific traits and the spotty data coverage by trait or location simply represents what has been merged in for this first release.   

These datasets use different variable names, data structures, units and sometimes methods.

### Referencing sources and recording methods

* The source information for each dataset is recorded, most frequently, the primary publications derived from the dataset
* People associated with the collection of the data are listed
* Collection methods, including value type (raw value, site mean, species mean) and replicate number are recorded  
* Sampling date is recorded  
* Sampling age class and collection type are recorded  
* Available data on site properties are recorded  
* Available data on contextual properties are recorded  

### Standardising and harmonising data

To create a single database for distribution to the research community, we developed a reproducible and transparent workflow in R for merging each dataset into AusTraits. The pipeline ensures the following information is standardised across all datasets in AusTraits, with the code to translate between the `data tables` submitted and AusTraits stored in a `metadata` file for the study. 

* **taxonomic nomenclature** follows the Australian Plant Census (APC), with a pipeline to update outdated taxonomy, correct minor spelling mistakes, and align with a known genus when a full species names isn't provided.  
* **trait names** are defined in our `definitions` file and only data for traits included in this file can be merged into AusTraits.  
* For **numeric traits** the `definitions` file includes `units` and the allowable `range` of values. All incoming data are converted to the appropriate units.
* For **categorical traits** the `definitions` file includes a list of allowable `values` - that is, allowed terms for the trait. Each categorical trait value is defined. List of substitutions translate the exact syntax and terms in the spreadsheet submitted into the values allowed by AusTraits. This ensures that for a certain trait the same `value` has an identical meaning throughout the AusTraits database.
* Site locations are recorded in decimel degrees

### Error checking

* The AusTraits data curator runs a series of **tests** on each data set, detailed in the [adding data vignette](http://traitecoevo.github.io/austraits.build/articles/adding_new_datasets.html)
* These tests identify **mis-aligned units**, **unrecognised taxon names**, and **unsupported categorical trait values**
* These tests also identify and eliminate *most* **duplicate data** - instances where the same numeric trait data is submitted by multiple people
* Each dataset is then compiled into a **report** which summarises metadata and plots/charts trait values in comparison to other measurements of that trait in AusTraits. The report is reviewed by the data contributor to ensure metadata are complete and data values are as expected.
* A second member of the AusTraits team double checks each dataset before it is merged into the main repository.


## Detailed vignettes
A series of more detailed vignettes delve into specific aspects in greater detail:  

* **[austraits.build repo file structure](http://traitecoevo.github.io/austraits.build/articles/austraits_file_structure.html)**  
* **[austraits.build database structure](http://traitecoevo.github.io/austraits.build/articles/austraits_database_structure.html)**  
* **[how to build AusTraits](http://traitecoevo.github.io/austraits.build/articles/austraits.build.html)**  
* **[AusTraits definitions file](http://traitecoevo.github.io/austraits.build/articles/Trait_definitions.html)**  
  
* **[how to contribute datasets to AusTraits](http://traitecoevo.github.io/austraits.build/articles/contributing_data.html)**  
* **[protocol for adding new datasets to AusTraits](http://traitecoevo.github.io/austraits.build/articles/adding_new_datasets.html)**  
